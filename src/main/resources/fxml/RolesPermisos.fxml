<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>

<AnchorPane xmlns="http://javafx.com/javafx/17"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="org.example.sgef_petalex_v_09.controllers.RolesPermisosController"
            fx:id="root"
            styleClass="root">

    <!-- Contenedor principal responsivo -->
    <VBox spacing="10"
          AnchorPane.topAnchor="0.0"
          AnchorPane.bottomAnchor="0.0"
          AnchorPane.leftAnchor="0.0"
          AnchorPane.rightAnchor="0.0">
        <padding>
            <Insets top="10.0" right="10.0" bottom="10.0" left="10.0"/>
        </padding>

        <!-- Toolbar: acciones especÃ­ficas para roles y permisos -->
        <HBox spacing="10" styleClass="toolbar-buttons">
            <Button fx:id="btnActualizarRoles" text="Actualizar Roles" onAction="#onActualizarRoles" styleClass="toolbar-button">
                <graphic>
                    <ImageView fitWidth="16" preserveRatio="true">
                        <image>
                            <Image url="@../images/icon_role.png"/>
                        </image>
                    </ImageView>
                </graphic>
            </Button>
            <Button fx:id="btnActualizarPermisos" text="Actualizar Permisos" onAction="#onActualizarPermisos" styleClass="toolbar-button">
                <graphic>
                    <ImageView fitWidth="16" preserveRatio="true">
                        <image>
                            <Image url="@../images/icon_lock.png"/>
                        </image>
                    </ImageView>
                </graphic>
            </Button>
            <Button fx:id="btnExportar" text="Exportar" onAction="#onExportar" styleClass="toolbar-button">
                <graphic>
                    <ImageView fitWidth="16" preserveRatio="true">
                        <image>
                            <Image url="@../images/icon_export.png"/>
                        </image>
                    </ImageView>
                </graphic>
            </Button>
        </HBox>

        <!-- Filtros -->
        <HBox spacing="10" alignment="CENTER_LEFT" styleClass="toolbar-filters">
            <TextField fx:id="txtBuscar" promptText="Buscar usuario..." styleClass="search-field"/>
            <ComboBox fx:id="cbFiltroRol" promptText="Filtrar por Rol" styleClass="filter-combo"/>
            <ComboBox fx:id="cbFiltroEstado" promptText="Filtrar por Estado" styleClass="filter-combo"/>
        </HBox>

        <!-- Tabla de Usuarios con Roles y Permisos expansiva -->
        <TableView fx:id="tableUsuariosRolesPermisos"
                   editable="true"
                   styleClass="table-clientes"
                   VBox.vgrow="ALWAYS">
            <columns>
                <TableColumn fx:id="colNombre"    text="Nombre"    prefWidth="150"/>
                <TableColumn fx:id="colUsuario"   text="Usuario"   prefWidth="150"/>
                <TableColumn fx:id="colRol"       text="Rol"       prefWidth="150" editable="true"/>
                <TableColumn fx:id="colPermisos"  text="Permisos"  prefWidth="200" editable="true"/>
                <TableColumn fx:id="colEstado"    text="Estado"    prefWidth="100"/>
            </columns>
        </TableView>
    </VBox>
</AnchorPane>
